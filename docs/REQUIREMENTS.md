# Requirements｜机械臂麻将（Robot Arm Mahjong）

## 1) 功能需求（按优先级）

### P0（必须实现：Scene1 MVP）
- 摄像头识别桌面并输出目标位姿 `target_pose`
- 机械臂动作序列：抓牌 → 微微收回看牌姿态 → 放置/扔到中央区域
- TTS 输出："我要验牌"
- Discord（或按钮）触发 Scene1
- 安全：急停、限速、限位、工作区边界

### P1（建议实现：至少 2 个增强动作）
- 点 3 点（tap3）
- 点头（nod）
- 摇头（shake）
- 台词风格切换：礼貌版/梗版

### P2（可选：更“像智能体”）
- `/status` 输出指标（最近一次 scene、成功率、耗时、失败原因计数）
- 失败回 home + 二次尝试
- 视觉从“定位”升级到“识别牌面/区域分类”（不作为 MVP 硬依赖）

---

## 2) 非功能需求（Hackathon 成败关键）

- **稳定性**：连续 10 次演示成功率 ≥ 80%
- **安全**：任何情况下不越界、不撞人
- **可观测**：失败原因可定位（vision? arm? grasp? timeout?）
- **演示节奏**：Scene1 全程 ≤ 10 秒（建议 6-8 秒）
- **可降级（受限）**：vision 不稳 → 手动点选取点；但 **抓取必须成功**（本项目不接受推/拨保底）

---

## 3) 多层“最小成功”定义（从 Demo 到产品化）

### Level A（Hackathon 必过：可演示闭环）
- Scene1：定位（可手点选）→ 动作库（固定轨迹）→ TTS

### Level B（可复现工程化）
- vision 自动输出 target_pose + 多次稳定执行
- orchestrator 有重试/超时/失败回 home

### Level C（Brain 具备“偏好与人格”）
- 台词库（礼貌/梗） + 动作节奏参数化
- OpenClaw 记住偏好：默认风格、安全等级

### Level D（受控的“自我改编程/自我验证”）
- OpenClaw 允许修改“参数”（速度、幅度、目标偏移）
- 执行前必须通过：guard（限速/限位）+ dry-run（空中走轨迹）+ 必要时 human-confirm

---

## 4) SOMA（SO-ARM100 系列）控制接口（已初步确认）

根据你提供的产品规格图：
- **通信协议：UART**（外接终端：电脑/开发板）
- **关节电机：STS3215 总线伺服舵机**
- **传感器：关节角度绝对编码器**
- **供电：3–12V / 10A 可调压电源**（需要稳定电源）
- **相机**：腕部/底座相机为 **USB 免驱相机**（可直接接入主机）
- 自由度：**5 DoF**

并且产品宣传提到：**与开源项目 LeRobot 的 SO-ARM100/101 生态兼容（操作方式一致，校准略有差别）**。

### 推荐实现路径（Hackathon 最稳）
- **优先采用 LeRobot 的 Python 接口作为 `arm_adapter`**（它本身就是“硬件无关的统一控制层”）
- OpenClaw（Node）通过 HTTP/CLI 调用 Python 的 `arm_adapter`，避免直接在 Node 里啃 UART 与运动细节。

> 备注：要做到“最终确认”，仍建议拿到 SOMA 官方/销售提供的 SDK 文档或示例代码（关节 ID、波特率、指令集、校准流程等）。
